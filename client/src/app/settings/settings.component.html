<div *ngIf="this.userSettings">
  <form [formGroup]="settingsForm">

    <div class="row ml-0 mr-0 justify-content-center align-content-start bangumin-height-container">

      <mat-card class="card col-11 col-sm-9 col-md-7 d-flex flex-column justify-content-center align-content-center"
      >
        <h3 class="text-align-center">{{'settings.category.language.name' | translate}}</h3>
        <mat-card-content class="align-self-start">
          <h4>{{'settings.category.language.BangumiNLanguage.name' | translate}}</h4>
          <div class="mt-3">
            <mat-radio-group formControlName="appLanguage">
              <mat-radio-button class="mr-3"
                                [value]="language.key" *ngFor="let language of availableLanguage | keys"
              >
                {{language.value}}
              </mat-radio-button>

            </mat-radio-group>
          </div>
          <div class="mt-3"></div>
          <div class="d-flex flex-row justify-content-start align-content-center">
            <h4>{{'settings.category.language.BangumiLanguage.name' | translate}}</h4>
            <mat-icon matTooltip="{{'settings.category.language.BangumiLanguage.explanation' | translate}}"
                      matTooltipPosition="{{'above'}}">info
            </mat-icon>
          </div>

          <div class="mt-3">
            <mat-radio-group formControlName="bangumiLanguage">
              <mat-radio-button class="mr-3"
                                [value]="'original'">
                {{'settings.category.language.BangumiLanguage.options.original' | translate}}
              </mat-radio-button>
              <mat-radio-button class="mr-3"
                                [value]="'zh-Hans'"
              >
                {{'settings.category.language.BangumiLanguage.options.zh-Hans' | translate}}
              </mat-radio-button>

            </mat-radio-group>
          </div>


        </mat-card-content>
      </mat-card>


      <mat-card
        class="card col-11 col-sm-9 col-md-7 d-flex flex-column justify-content-center align-content-center mt-3">
        <h3 class="text-align-center">{{'settings.category.appearance.name' | translate}}</h3>
        <mat-card-content class="align-self-start">
          <h4>{{'settings.category.appearance.colorTheme.name' | translate}}</h4>


          <div class="mt-3">
            <mat-radio-group class="d-flex flex-column flex-md-row" formControlName="appTheme">
              <ng-container *ngFor="let appTheme of availableAppThemes">
                <mat-radio-button
                  class="mr-3"
                  [value]="appTheme"
                  *ngIf="appTheme !== 'bangumi-pink-blue'"
                >
                  {{'settings.category.appearance.colorTheme.options.' + appTheme | translate}}
                </mat-radio-button>
              </ng-container>

              <mat-radio-button
                class="mr-3"
                [value]="'bangumi-pink-blue'"
                *ngIf="settingsForm.get('showA11YViolationTheme').value"
              >
                {{'settings.category.appearance.colorTheme.options.bangumi-pink-blue' | translate}}
              </mat-radio-button>

            </mat-radio-group>

            <div class="d-flex flex-row justify-content-start align-content-center">
              <mat-slide-toggle
                formControlName="showA11YViolationTheme"
                (change)="resetA11YViolationOptionsIfSelected($event)"
                class="mr-2"

              >
                <span class="long-text-wrap">{{'settings.category.appearance.colorTheme.showA11YViolationTheme.name' | translate}}</span>
              </mat-slide-toggle>
              <mat-icon
                matTooltip="{{'settings.category.appearance.colorTheme.showA11YViolationTheme.tooltip.explanation' | translate}}"
                matTooltipPosition="{{'above'}}">info
              </mat-icon>
            </div>
          </div>

        </mat-card-content>
      </mat-card>

      <mat-card
        class="card col-11 col-sm-9 col-md-7 d-flex flex-column justify-content-center align-content-center mt-3">
        <h3 class="text-align-center">{{'settings.category.privacy.name' | translate}}</h3>
        <mat-card-content class="align-self-start">
          <h4>{{'settings.category.privacy.personalData.name' | translate}}</h4>

          <div class="mt-3">
            <div class="d-flex flex-row justify-content-start align-content-center">
              <mat-slide-toggle
                formControlName="stopCrawling"
                (change)="showStopCrawlingExplanationDialog()"
                class="mr-2"

              >
                <span class="long-text-wrap">{{'settings.category.privacy.personalData.stopCrawling.name' | translate}}</span>
              </mat-slide-toggle>
              <mat-icon
                matTooltip="{{'settings.category.privacy.personalData.stopCrawling.tooltip.explanation' | translate}}"
                matTooltipPosition="{{'above'}}">info
              </mat-icon>
            </div>
          </div>

        </mat-card-content>
      </mat-card>
    </div>


  </form>

</div>

<div *ngIf="!this.userSettings" class="row justify-content-center align-items-center bangumin-height-container">
  <mat-spinner></mat-spinner>
</div>
