<mat-toolbar color="primary" class="fixed-header mat-elevation-z6 helper-toolbar" fxLayoutGap="10px">
  <button mat-icon-button (click)="toggleSidenav()" *ngIf="LayoutService.xs(currentDeviceWidth) && isAuthenticated">
    <mat-icon>menu</mat-icon>
  </button>
  <div fxShow fxHide.xs>BangumiN</div>

  <div *ngIf="LayoutService.gtXs(currentDeviceWidth) && isAuthenticated">
    <a mat-button routerLink="./progress">{{'progress.name' | translate}}</a>
    <a mat-button [routerLink]="['./user', this.bangumiUser.user_id]">{{'profile.name' | translate}}</a>
    <a mat-button routerLink="./spoilers">{{'posts.bangumin.spoilerBox.name' | translate}}</a>
  </div>

  <div fxFlex="1 1 auto"></div>

  <div class="search-container" fxLayoutAlign="end center" *ngIf="isAuthenticated">
    <input type="search" aria-label="search" placeholder="{{'nav.search.placeholder.name' | translate}}" #searchBar
           (keyup.enter)="doFullSearch(searchBar.value)" value="{{searchKeywords}}">
  </div>


  <a class="helper-mat-toolbar-item helper-cursor-pointer" [matMenuTriggerFor]="menu">
    <span class="helper-vertical-align-img"></span><img src={{bangumiUser.avatar.large}}>
  </a>

</mat-toolbar>


<mat-menu #menu="matMenu">
  <ng-container *ngIf="isAuthenticated">
    <button routerLink="./settings" mat-menu-item>
      <span>{{'nav.menu.settings.name' | translate}}</span>
    </button>
    <button mat-menu-item (click)="logout()">
      <span>{{'nav.menu.logout.name' | translate}}</span>
    </button>
  </ng-container>

  <ng-container *ngIf="!isAuthenticated">
    <button mat-menu-item (click)="login()">
      <span>{{'nav.menu.login.name' | translate}}</span>
    </button>
  </ng-container>
</mat-menu>
